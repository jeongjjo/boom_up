function getEditorContent(){return _editorID?tinyMCE.get(_editorID).getBody().innerHTML:""}function getEditorContentQS(e){return _editorID&&e?tinyMCE.get(_editorID).getBody().querySelectorAll(e):null}function _moveEditorContentCurrentPos(){var e=tinyMCE.get(_editorID),t=e.selection.getNode();t.scrollIntoViewIfNeeded&&t.scrollIntoViewIfNeeded(),e.selection.select(t),e.selection.collapse(!1)}function _addEditorContent(e){tinyMCE.activeEditor&&tinyMCE.activeEditor.dom.add(tinymce.activeEditor.getBody(),"p",null,e)}function _addEditorContentCurrentPos(e,t){_editorID&&(tinyMCE.get(_editorID).execCommand("mceInsertContent",!1,`<p id="${e}"><span style="border:1px solid #ccc"></span></p>`),setTimeout(function(){tinyMCE.activeEditor.dom.$("p#"+e).empty().html(t)},50))}function _removeEditorContent(e){if(_editorID){var t=tinyMCE.get(_editorID).contentDocument.querySelector(e);t&&t.remove()}}async function initEditor(e,t){_editorID=await tinymce.init(Object.assign({selector:e,selector:"textarea#article-editor",height:"100%",width:"100%",plugins:["media powerpaste mediaembed","pageembed"],menubar:!1,statusbar:!1,contextmenu:!1,toolbar_drawer:"sliding",toolbar:"iiimg media | bold | alignleft aligncenter alignright | forecolor | formatselect | italic underline strikethrough",mediaembed_max_width:470,content_css_cors:!0,extended_valid_elements:"iframe[src|style|class],video[src|poster|playsinline|controls|loop|class|preload|width|height|data-setup],source[src|type],img[src|title|onerror],a[href|class|style]",media_filter_html:!1,powerpaste_allow_local_images:!0,powerpaste_word_import:"prompt",powerpaste_html_import:"clean",powerpaste_clean_filtered_inline_elements:"strong, em, b, i, u, strike, sup, sub",smart_paste:!1,force_br_newlines:!0,force_p_newlines:!1,media_dimensions:!1,block_formats:"보통=p; 작게=h4; 크게=h2; 가장크게=h1",paste_postprocess:function(e,t){if(console.log(t.node,t.mode,t.source),"image"===t.source&&t.node.firstElementChild&&t.node.firstElementChild.src&&t.node.firstElementChild.src.startsWith("blob:"))tinyMCE.activeEditor.uploadImages(function(e){});else if(("auto"===t.mode&&"plaintext"===t.source||"DIV"===t.node.nodeName&&"display:none"===t.node.getAttribute("data-mce-style"))&&$(t.node).find("a").length>0)for(var o of $(t.node).find("a")){var i=$(o.parentElement);i.text(o.href.trim()).removeAttr("data-mce-style").removeAttr("style"),console.log(o.parentElement)}},images_upload_url:"/api/attach/blob?blob=true"},t||{})),_editorID=_editorID&&_editorID.length>0?_editorID[0].id:null;new RegExp(/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+,.~#?&//=]*)$/)}var _editorID=null;